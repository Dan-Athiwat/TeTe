<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Creator - Fixed & Fast</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap');
        body { font-family: 'Kanit', sans-serif; background-color: #0f172a; color: #f1f5f9; }
        .chat-container::-webkit-scrollbar { width: 6px; }
        .chat-container::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        .image-glow { box-shadow: 0 0 20px rgba(56, 189, 248, 0.2); }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl bg-[#1e293b] rounded-3xl shadow-2xl overflow-hidden flex flex-col h-[85vh] border border-slate-700">
        <div class="bg-slate-800 p-4 border-b border-slate-700 flex items-center gap-3">
            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
            <h1 class="text-lg font-semibold tracking-wide text-sky-400">AI CREATOR PRO</h1>
        </div>

        <div id="chat-box" class="chat-container flex-1 overflow-y-auto p-4 flex flex-col gap-4">
            <div class="self-start bg-slate-700 p-3 rounded-2xl rounded-tl-none border border-slate-600 text-sm max-w-[85%]">
                ü§ñ **‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö!** ‡∏ú‡∏°‡πÅ‡∏Å‡πâ‡∏ö‡∏±‡∏Ñ‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß <br>
                ‡∏•‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ß‡πà‡∏≤ **"‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ‡∏°‡∏±‡∏á‡∏Å‡∏£‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á"** ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏≤‡∏°‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö
            </div>
        </div>

        <div class="p-4 bg-slate-800 border-t border-slate-700">
            <div class="flex gap-2">
                <input id="user-input" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡πà‡∏á‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ..." 
                    class="flex-1 bg-slate-900 border border-slate-600 rounded-2xl px-5 py-3 outline-none focus:border-sky-500 transition-all text-sm">
                <button id="send-btn" class="bg-sky-600 hover:bg-sky-500 text-white px-6 py-3 rounded-2xl font-bold transition-all active:scale-95 shadow-lg">
                    ‡∏™‡πà‡∏á
                </button>
            </div>
        </div>
    </div>

    <script>
        const chatBox = document.getElementById('chat-box');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');

        async function handleMessage() {
            const text = userInput.value.trim();
            if (!text) return;

            addBubble('‡∏Ñ‡∏∏‡∏ì', text, 'user');
            userInput.value = '';

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const isDrawing = /‡∏ß‡∏≤‡∏î|‡∏™‡∏£‡πâ‡∏≤‡∏á|‡∏£‡∏π‡∏õ|‡∏†‡∏≤‡∏û|image|draw|art/i.test(text);

            if (isDrawing) {
                const bubbleId = 'ai-' + Date.now();
                addBubble('AI', 'üé® ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ô‡∏£‡∏°‡∏¥‡∏ï‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ñ‡∏£‡∏±‡∏ö...', 'ai', bubbleId);

                // ‡∏î‡∏∂‡∏á‡∏Ñ‡∏≥‡∏´‡∏•‡∏±‡∏Å‡∏°‡∏≤‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ
                let prompt = text.replace(/‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ|‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ|‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û|‡∏†‡∏≤‡∏û|‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢|‡πÄ‡∏≠‡∏≤‡πÅ‡∏ö‡∏ö/g, '').trim();
                if (!prompt) prompt = "beautiful landscape art";

                const seed = Math.floor(Math.random() * 1000000);
                // ‡πÉ‡∏ä‡πâ Model Flux ‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
                const imageUrl = `https://pollinations.ai/p/${encodeURIComponent(prompt)}?width=1024&height=1024&seed=${seed}&model=flux&nologo=true`;

                // ‡∏£‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û‡πÉ‡∏ï‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                const bubble = document.getElementById(bubbleId);
                const imgContainer = document.createElement('div');
                imgContainer.className = 'mt-3 relative min-h-[200px] flex items-center justify-center bg-slate-800 rounded-xl overflow-hidden';
                imgContainer.innerHTML = `<div class="text-xs text-slate-500 animate-pulse">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û...</div>`;
                
                const img = new Image();
                img.src = imageUrl;
                img.className = 'w-full rounded-xl image-glow opacity-0 transition-opacity duration-1000 relative z-10';
                
                img.onload = () => {
                    imgContainer.innerHTML = ''; // ‡πÄ‡∏≠‡∏≤‡∏ï‡∏±‡∏ß‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏≠‡∏Å
                    imgContainer.appendChild(img);
                    img.classList.remove('opacity-0');
                    scrollToBottom();
                };

                img.onerror = () => {
                    imgContainer.innerHTML = '<div class="p-4 text-xs text-red-400 text-center">‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤</div>';
                };

                bubble.appendChild(imgContainer);

            } else {
                // ‡∏ñ‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥
                const bubbleId = 'ai-' + Date.now();
                addBubble('AI', '...', 'ai', bubbleId);

                try {
                    const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(text)}?model=openai&system=‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠AI‡∏ó‡∏µ‡πà‡∏â‡∏•‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î_‡∏ï‡∏≠‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢_‡∏™‡∏±‡πâ‡∏ô‡πÜ‡∏ï‡∏£‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô`);
                    const responseText = await res.text();

                    const bubble = document.getElementById(bubbleId);
                    // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á Error JSON ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á
                    if (responseText.includes('"error":')) {
                        bubble.innerHTML = `<b>AI:</b> ‚ö†Ô∏è ‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢`;
                    } else {
                        bubble.innerHTML = `<b>AI:</b> ${responseText}`;
                    }
                } catch (e) {
                    document.getElementById(bubbleId).innerHTML = `<b>AI:</b> ‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö`;
                }
            }
            scrollToBottom();
        }

        function addBubble(sender, content, type, id = '') {
            const div = document.createElement('div');
            if (id) div.id = id;
            div.className = `max-w-[85%] p-4 rounded-2xl text-sm shadow-lg ${
                type === 'user' 
                ? 'self-end bg-sky-600 text-white rounded-tr-none' 
                : 'self-start bg-slate-700 text-slate-200 rounded-tl-none border border-slate-600'
            }`;
            div.innerHTML = `<b>${sender}:</b> ${content}`;
            chatBox.appendChild(div);
            scrollToBottom();
        }

        function scrollToBottom() {
            chatBox.scrollTo({ top: chatBox.scrollHeight, behavior: 'smooth' });
        }

        sendBtn.onclick = handleMessage;
        userInput.onkeypress = (e) => { if(e.key === 'Enter') handleMessage() };
    </script>
</body>
</html>